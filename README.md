# üõí langchain_1_shoply ‚Äî –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –±–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞ Shoply

---

## üß† –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

–ë–æ—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ **RAG (Retrieval-Augmented Generation)** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ FAISS –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –≤ FAQ.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞ (–¥–æ 3 —Ä–µ–ø–ª–∏–∫).
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/order <id>` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞.
- –õ–æ–≥–∏—Ä—É–µ—Ç –∫–∞–∂–¥—É—é —Å–µ—Å—Å–∏—é –≤ `logs/session_*.jsonl` —Å –¥–µ—Ç–∞–ª—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤.

---

## üìã –ü–û–°–¢–ê–ù–û–í–ö–ê –ó–ê–î–ê–ß–ò

–¶–µ–ª—å: —Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞ ¬´Shoply¬ª, –∫–æ—Ç–æ—Ä—ã–π:

‚úÖ –í–µ–¥—ë—Ç –¥–∏–∞–ª–æ–≥ —Å –∏—Å—Ç–æ—Ä–∏–µ–π, –æ—Ç–≤–µ—á–∞–µ—Ç –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É.  
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π FAQ (JSON) –¥–ª—è —Ç–∏–ø–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤.  
‚úÖ –ü–æ –∫–æ–º–∞–Ω–¥–µ `/order 12345` –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∏–∑ `orders.json`.  
‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –∫–∞–∂–¥—É—é —Å–µ—Å—Å–∏—é –≤ `logs/session_*.jsonl` –∏ —Å—á–∏—Ç–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã.

---

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞—á—ë—Ç–∞ (—á–µ–∫-–ª–∏—Å—Ç)

- [x] –ï—Å—Ç—å —Ñ–∞–π–ª `.env` —Å `OPENAI_API_KEY` –∏ `OPENAI_MODEL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `gpt-4o-mini`).  
- [x] –ë–æ—Ç –¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç (–º–∏–Ω–∏–º—É–º 3 —Ä–µ–ø–ª–∏–∫–∏ –ø–æ–¥—Ä—è–¥ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ç–µ–º—ã).  
- [x] –ö–æ–º–∞–Ω–¥–∞ `/order <id>` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∏–∑ `orders.json` –∏–ª–∏ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π –æ—Ç–∫–∞–∑, –µ—Å–ª–∏ `id` –Ω–µ –Ω–∞–π–¥–µ–Ω.  
- [x] –í –æ—Ç–≤–µ—Ç–∞—Ö –≤–∏–¥–Ω–æ, —á—Ç–æ –±–æ—Ç –≤–µ–∂–ª–∏–≤, –∫—Ä–∞—Ç–æ–∫ –∏ –Ω–µ ¬´—Ñ–∞–Ω—Ç–∞–∑–∏—Ä—É–µ—Ç¬ª –≤–Ω–µ FAQ/–∑–∞–∫–∞–∑–æ–≤.  
- [x] –í `logs/` —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ñ–∞–π–ª —Å –¥–∏–∞–ª–æ–≥–æ–º –∏ –ø–æ–ª–µ–º `usage` (prompt/completion/total —Ç–æ–∫–µ–Ω—ã).

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
langchain_1_shoply/
‚îú‚îÄ‚îÄ ecom_bot/
‚îÇ   ‚îú‚îÄ‚îÄ langchain_qa.py         # –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ data/
‚îÇ       ‚îú‚îÄ‚îÄ faq.json            # –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (FAQ)
‚îÇ       ‚îî‚îÄ‚îÄ orders.json         # –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–∫–∞–∑–∞—Ö
‚îÇ   ‚îî‚îÄ‚îÄ logs/                   # –ª–æ–≥–∏ —Å–µ—Å—Å–∏–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è)
‚îÇ   ‚îî‚îÄ‚îÄ .env                    # —Ñ–∞–π–ª —Å API –∫–ª—é—á–æ–º –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
‚îî‚îÄ‚îÄ requirements.txt            # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## ‚öôÔ∏è –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
   ```env
   OPENAI_API_KEY=sk-XXXXX
   LLM_API_BASE_URL=https://api.openai.com/v1
   LLM_MODEL=gpt-4o-mini
   EMBEDDING_MODEL=text-embedding-3-small
   LLM_TEMPERATURE=0.3
   CONTEXT_LENGTH=3
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   python ecom_bot/app.py --model gpt-5-chat-latest --url your_llm_url.com --api-key sk-XXXXX
   ```
> üí° –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`--model`, `--url`, `--api-key`) –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã ‚Äî –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω—ã, –±–µ—Ä—É—Ç—Å—è –∏–∑ `.env` –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## üìù –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

```
–í–≤–µ–¥–∏—Ç–µ 'exit' –¥–ª—è –≤—ã—Ö–æ–¥–∞

–í–∞—à –≤–æ–ø—Ä–æ—Å: –ö–∞–∫ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–≤–∞—Ä?
–û—Ç–≤–µ—Ç: –í—ã –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–≤–∞—Ä –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è. –£–ø–∞–∫—É–π—Ç–µ –µ–≥–æ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —É–ø–∞–∫–æ–≤–∫—É –∏ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ —á–µ–∫.

–í–∞—à –≤–æ–ø—Ä–æ—Å: /order 12345
–û—Ç–≤–µ—Ç: –ó–∞–∫–∞–∑ #12345: –ó–∞–∫–∞–∑ –≤ –ø—É—Ç–∏. –û–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —á–µ—Ä–µ–∑ 2 –¥–Ω. –ü–µ—Ä–µ–≤–æ–∑—á–∏–∫: DHL.
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í—Å–µ —Å–µ—Å—Å–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ `logs/` –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSONL.  
–ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
- –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û—Ç–≤–µ—Ç –±–æ—Ç–∞
- –†–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ (`prompt_tokens`, `completion_tokens`, `total_tokens`)
- –û—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

üí° –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –ª—é–±—É—é —Å–∏—Å—Ç–µ–º—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç–µ URL –∏ –º–æ–¥–µ–ª—å –Ω–∞ –≤–∞—à LLM-–ø—Ä–æ–≤–∞–π–¥–µ—Ä!
